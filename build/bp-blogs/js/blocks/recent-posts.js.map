{"version":3,"sources":["bp-blogs/js/blocks/recent-posts/edit.js","bp-blogs/js/blocks/recent-posts/transforms.js","bp-blogs/js/blocks/recent-posts.js"],"names":["editRecentPostsBlock","blockEditor","InspectorControls","components","Disabled","PanelBody","RangeControl","TextControl","ToggleControl","element","Fragment","createElement","i18n","__","wp","blockComponents","ServerSideRender","bp","attributes","setAttributes","title","maxPosts","linkTitle","text","value","transforms","blocks","createBlock","from","type","isMatch","idBase","instance","raw","transform","max_posts","link_title","registerBlockType","description","icon","background","foreground","src","category","default","edit"],"mappings":";AAwEeA,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EArEf,MACCC,aAAa,kBACZC,GAEDC,YAAY,SACXC,EADW,UAEXC,EAFW,aAGXC,EAHW,YAIXC,EAJW,cAKXC,GAEDC,SAAS,SACRC,EADQ,cAERC,GAEDC,MAAM,GACLC,IAEEC,IAMHC,iBAAiB,iBAChBC,IAEEC,GAEEjB,EAAuB,EAAIkB,WAAAA,EAAYC,cAAAA,MACtC,MAAA,MAAEC,EAAF,SAASC,EAAT,UAAmBC,GAAcJ,EAGtC,OAAA,EAAC,EACA,KAAA,EAAC,EACA,KAAA,EAAC,EAAD,CAAW,MAAQL,EAAI,WAAY,cAAiB,aAAc,GACjE,EAAC,EAAD,CACC,MAAQA,EAAI,QAAS,cACrB,MAAQO,EACR,SAAaG,IACZJ,EAAe,CAAEC,MAAOG,OAG1B,EAAC,EAAD,CACC,MAAQV,EAAI,oBAAqB,cACjC,MAAQQ,EACR,SAAaG,GACZL,EAAe,CAAEE,SAAUG,IAE5B,IAAM,EACN,IAAM,GACN,UAAQ,IAET,EAAC,EAAD,CACC,MAAQX,EAAI,sCAAuC,cACnD,UAAaS,EACb,SAAW,KACVH,EAAe,CAAEG,WAAaA,SAKlC,EAAC,EACA,KAAA,EAAC,EAAD,CAAkB,MAAM,kBAAkB,WAAaJ,OAM5ClB,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACnCAyB,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAlCf,MACCC,QAAQ,YACPC,IAEEb,GAOEW,EAAa,CAClBG,KAAM,CACL,CACCC,KAAM,QACNH,OAAQ,CAAE,sBACVI,QAAS,EAAIC,OAAAA,EAAQC,SAAAA,OACbA,MAAAA,IAAAA,EAAUC,MAIC,iCAAXF,EAERG,UAAW,EAAIF,SAAAA,KACPL,EAAa,kBAAmB,CACtCP,MAAOY,EAASC,IAAIb,MACpBC,SAAUW,EAASC,IAAIE,UACvBb,UAAWU,EAASC,IAAIG,gBAOdX,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACnBf,aAHA,IAAA,EAAA,EAAA,QAAA,wBACA,EAAA,EAAA,QAAA,8BAEA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAfA,MACCC,QAAQ,kBACPW,GAEDzB,MAAM,GACLC,IAEEC,GAQJuB,EAAmB,kBAAmB,CACrCjB,MAAOP,EAAI,2BAA4B,cACvCyB,YAAazB,EAAI,+DAAgE,cACjF0B,KAAM,CACLC,WAAY,OACZC,WAAY,UACZC,IAAK,aAENC,SAAU,aACVzB,WAAY,CACXE,MAAO,CACNS,KAAM,SACNe,QAAS/B,EAAI,2BAA4B,eAE1CQ,SAAU,CACTQ,KAAM,SACNe,QAAS,IAEVtB,UAAW,CACVO,KAAM,UACNe,SAAS,IAGXC,KAAM7C,EAvB+B,QAwBrCyB,WAAYA,EAAAA","file":"recent-posts.js","sourceRoot":"../src","sourcesContent":["/**\n * WordPress dependencies.\n */\nconst {\n\tblockEditor: {\n\t\tInspectorControls,\n\t},\n\tcomponents: {\n\t\tDisabled,\n\t\tPanelBody,\n\t\tRangeControl,\n\t\tTextControl,\n\t\tToggleControl,\n\t},\n\telement: {\n\t\tFragment,\n\t\tcreateElement,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * BuddyPress dependencies.\n */\nconst {\n\tblockComponents: {\n\t\tServerSideRender,\n\t},\n} = bp;\n\nconst editRecentPostsBlock = ( { attributes, setAttributes } ) => {\n\tconst { title, maxPosts, linkTitle } = attributes;\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Settings', 'buddypress' ) } initialOpen={ true }>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ __( 'Title', 'buddypress' ) }\n\t\t\t\t\t\tvalue={ title }\n\t\t\t\t\t\tonChange={ ( text ) => {\n\t\t\t\t\t\t\tsetAttributes( { title: text } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tlabel={ __( 'Max posts to show', 'buddypress' ) }\n\t\t\t\t\t\tvalue={ maxPosts }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { maxPosts: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tmax={ 10 }\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Link block title to Blogs directory', 'buddypress' ) }\n\t\t\t\t\t\tchecked={ !! linkTitle }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tsetAttributes( { linkTitle: ! linkTitle } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<Disabled>\n\t\t\t\t<ServerSideRender block=\"bp/recent-posts\" attributes={ attributes } />\n\t\t\t</Disabled>\n\t\t</Fragment>\n\t);\n};\n\nexport default editRecentPostsBlock;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: {\n\t\tcreateBlock,\n\t},\n} = wp;\n\n/**\n * Transforms Legacy Widget to Recent Posts Block.\n *\n * @type {Object}\n */\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/legacy-widget' ],\n\t\t\tisMatch: ( { idBase, instance } ) => {\n\t\t\t\tif ( ! instance?.raw ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn idBase === 'bp_blogs_recent_posts_widget';\n\t\t\t},\n\t\t\ttransform: ( { instance } ) => {\n\t\t\t\treturn createBlock( 'bp/recent-posts', {\n\t\t\t\t\ttitle: instance.raw.title,\n\t\t\t\t\tmaxPosts: instance.raw.max_posts,\n\t\t\t\t\tlinkTitle: instance.raw.link_title,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: {\n\t\tregisterBlockType,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport editRecentPostsBlock from './recent-posts/edit';\nimport transforms from './recent-posts/transforms';\n\nregisterBlockType( 'bp/recent-posts', {\n\ttitle: __( 'Recent Networkwide Posts', 'buddypress' ),\n\tdescription: __( 'A list of recently published posts from across your network.', 'buddypress' ),\n\ticon: {\n\t\tbackground: '#fff',\n\t\tforeground: '#d84800',\n\t\tsrc: 'wordpress',\n\t},\n\tcategory: 'buddypress',\n\tattributes: {\n\t\ttitle: {\n\t\t\ttype: 'string',\n\t\t\tdefault: __( 'Recent Networkwide Posts', 'buddypress' ),\n\t\t},\n\t\tmaxPosts: {\n\t\t\ttype: 'number',\n\t\t\tdefault: 10\n\t\t},\n\t\tlinkTitle: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tedit: editRecentPostsBlock,\n\ttransforms: transforms,\n} );\n"]}